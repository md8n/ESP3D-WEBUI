<div id="tablettab" class="tabcontent tablettab">
  <div id="tablet-listener">
    <div class="maslow">
      <div class="display tablettab-canvas-wrapper">
        <canvas id="small-toolpath" class="previewer" style="width: 100%; height: 100%"></canvas>
        <textarea id="tablettab_gcode" style="border:none" class="gcode" rows="8" placeholder="GCode File Display"
          spellcheck="false" readonly>
        </textarea>
      </div>
      <div class="tablettab-controls-wrapper">
        <div style="grid-template-columns: 20% 20% 20% 20% 20%;" class="maslow-grid-container tablettab-controls-item">
          <!-- Buttons row 1 -->
          <div id="tablettab_zUp" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #f2f0e4; color: #337ab7; border-right: 2px solid grey;">
            <svg width="32" height="32" viewBox="0 0 38 38">
              <polygon fill="currentColor" points="10.319 5.525 17.833 13.039 2.805 13.039 10.319 5.525" />
              <rect fill="currentColor" height="2.5" transform="translate(31.899 11.262) rotate(90)" width="21.79"
                x="-0.576" y="20.33" />
            </svg>
            Z
          </div>
          <div id="tablettab_topLeft" class="maslow-grid-item maslow-grid-item-btn" style="background-color: #b69fcb;">
            <canvas id="tlBtn" style="width: 100%; height: 100%"></canvas>
          </div>
          <div id="tablettab_top" class="maslow-grid-item maslow-grid-item-btn" style="background-color: #9d88c0;">
            <canvas id="upBtn" style="width: 100%; height: 100%"></canvas>
          </div>
          <div id="tablettab_topRight" class="maslow-grid-item maslow-grid-item-btn" style="background-color: #b69fcb;">
            <canvas id="trBtn" style="width: 100%; height: 100%"></canvas>
          </div>
          <div id="calibrationBTN" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #f2f0e4; font-size: 1vw; color: #337ab7; display: flex;flex-direction: column;">
            <svg height="32" width="32" viewBox="0 0 48 48" fill="currentColor">
              <g>
                <path
                  d="M24,11c-7.2,0-13,5.8-13,13c0,7.2,5.8,13,13,13c7.2,0,13-5.8,13-13C37,16.8,31.2,11,24,11z M24,35c-6.1,0-11-4.9-11-11   s4.9-11,11-11s11,4.9,11,11S30.1,35,24,35z" />
                <path
                  d="M44,20h-2.4c-0.5-2.1-1.3-4-2.3-5.6l1.6-1.8c1.2-1.2,1.2-3,0-4.2L39.5,7c-1.2-1.2-3.1-1.2-4.2,0l-1.8,1.8   c-1.8-1.2-3.6-1.9-5.6-2.3V4c0-1.7-1.3-3-3-3h-2c-1.7,0-3,1.3-3,3v2.5c-1.9,0.4-3.8,1.2-5.6,2.3l-1.7-1.7c-1.2-1.2-3-1.2-4.2,0   L7,8.5c-0.6,0.6-0.9,1.3-0.9,2.1s0.3,1.5,0.9,2.1l1.8,1.7c-1.1,1.8-1.9,3.6-2.3,5.6H4c-1.7,0-3,1.3-3,3v2c0,1.7,1.3,3,3,3h2.5   c0.4,1.9,1.2,3.8,2.4,5.6l-1.7,1.8c-1.2,1.2-1.2,3,0,4.2L8.5,41c1.2,1.2,3,1.2,4.2,0l1.7-1.8c1.8,1.1,3.6,1.9,5.6,2.3V44   c0,1.7,1.3,3,3,3h2c1.7,0,3-1.3,3-3v-2.4c2.1-0.5,3.9-1.3,5.6-2.3l1.7,1.6c1.2,1.2,3,1.2,4.2,0l1.4-1.4c1.2-1.2,1.2-3,0-4.2   l-1.7-1.7c1.2-1.8,1.9-3.6,2.3-5.6H44c1.7,0,3-1.3,3-3v-2C47,21.3,45.7,20,44,20z M45,25c0,0.6-0.4,1-1,1h-4.2l-0.1,0.8   c-0.4,2.2-1.2,4.3-2.6,6.3l-0.5,0.7l2.9,2.9c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-1.4,1.4c-0.4,0.4-1,0.4-1.4,0   l-2.9-2.8l-0.7,0.5c-1.8,1.3-3.9,2.2-6.3,2.6L26,40v4c0,0.6-0.4,1-1,1h-2c-0.6,0-1-0.4-1-1v-4.2l-0.8-0.1c-2.2-0.4-4.3-1.2-6.3-2.6   l-0.7-0.5l-2.9,3c-0.4,0.4-1,0.4-1.4,0l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4l2.9-3l-0.5-0.7c-1.4-2-2.3-4.1-2.6-6.3L8.2,26H4   c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1h4.2l0.1-0.8c0.4-2.2,1.2-4.3,2.6-6.3l0.5-0.7l-3-2.9c-0.2-0.2-0.3-0.4-0.3-0.7   s0.1-0.5,0.3-0.7l1.4-1.4c0.4-0.4,1-0.4,1.4,0l2.9,2.9l0.7-0.5c1.9-1.4,4.1-2.3,6.3-2.6l0.8-0.1V4c0-0.6,0.4-1,1-1h2   c0.6,0,1,0.4,1,1v4.2l0.8,0.1c2.2,0.4,4.3,1.2,6.3,2.6l0.7,0.5l3-3c0.4-0.4,1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4l-2.7,3   l0.5,0.7c1.2,1.8,2.1,3.9,2.6,6.3L40,22h4c0.6,0,1,0.4,1,1V25z" />
              </g>
            </svg>
            <span>Setup</span>
          </div>
          <!-- Buttons row 2 -->
          <div id="disZ" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #f2f0e4; border-right: 2px solid grey;">5</div>
          <div id="tablettab_left" class="maslow-grid-item maslow-grid-item-btn" style="background-color: #9d88c0;">
            <canvas id="lBtn" style="width: 100%; height: 100%">
          </div>
          <div id="disM" class="maslow-grid-item maslow-grid-item-btn" style="background-color: #f2f0e4;">100</div>
          <div id="tablettab_right" class="maslow-grid-item maslow-grid-item-btn" style="background-color: #9d88c0;">
            <canvas id="rBtn" style="width: 100%; height: 100%">
          </div>
          <div class="maslow-grid-item maslow-grid-item-btn"></div>
          <!-- Buttons row 3 -->
          <div id="tablettab_zDown" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #f2f0e4; color: #337ab7; border-right: 2px solid grey;">
            <svg width="32" height="32" viewBox="0 0 38 38">
              <polygon transform="rotate(180) translate(-21 -44)" fill="currentColor"
                points="10.319 5.525 17.833 13.039 2.805 13.039 10.319 5.525"></polygon>
              <rect fill="currentColor" height="2.5" transform="translate(32 10) rotate(90)" width="21.79" x="-0.576"
                y="20.33">
              </rect>
            </svg>
            Z
          </div>
          <div id="tablettab_bottomLeft" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #b69fcb;">
            <canvas id="blBtn" style="width: 100%; height: 100%"></canvas>
          </div>
          <div id="tablettab_bottom" class="maslow-grid-item maslow-grid-item-btn" style="background-color: #9d88c0;">
            <canvas id="dnBtn" style="width: 100%; height: 100%">
          </div>
          <div id="tablettab_bottomRight" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #b69fcb;">
            <canvas id="brBtn" style="width: 100%; height: 100%"></canvas>
          </div>
          <div class="maslow-grid-item maslow-grid-item-btn"></div>
          <!-- Buttons row 4 -->
          <div id="tablettab_set_z_home" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #f2f0e4; border-right: 2px solid grey;">Define Z Home</div>
          <div id="tablettab_move_to_xy_home" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #f2f0e4;">
            <canvas id="hBtn" style="width: 100%; height: 100%">
          </div>
          <div id="tablettab_toggle_units" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #f2f0e4;" title="Toggle Units">mm</div>
          <div id="tablettab_set_xy_home" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #f2f0e4;" title="Press and hold, or tap twice">Define XY Home</div>
          <div class="maslow-grid-item maslow-grid-item-btn"></div>
        </div>
        <div style="grid-template-columns: 80% 20%;" class="maslow-grid-container tablettab-controls-item"
          style="height: 60px;">
          <select id="filelist" class="form-control">
            <option>Load File...</option>
          </select>
          <div id="tablettab_gcode_upload" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #337ab7; color: white; height: 50px;display: flex;flex-direction: column;">
            <svg width="1.3em" height="1.2em" viewBox="0 0 1792 1792" fill="currentColor">
              <g>
                <path
                  d="M1344 1472q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm256 0q0-26-19-45t-45-19-45 19-19 45 19 45 45 19 45-19 19-45zm128-224v320q0 40-28 68t-68 28h-1472q-40 0-68-28t-28-68v-320q0-40 28-68t68-28h427q21 56 70.5 92t110.5 36h256q61 0 110.5-36t70.5-92h427q40 0 68 28t28 68zm-325-648q-17 40-59 40h-256v448q0 26-19 45t-45 19h-256q-26 0-45-19t-19-45v-448h-256q-42 0-59-40-17-39 14-69l448-448q18-19 45-19t45 19l448 448q31 30 14 69z" />
              </g>
            </svg>
            <span>Upload GCode</span>
          </div>
        </div>
        <div class="maslow-grid-container tablettab-controls-item" style="grid-template-columns: 33% 33% 33%;">
          <div id="tablettab_gcode_play" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #4aa85c;">
            <canvas id="playBtn" style="width: 100%; height: 100%"></canvas>
          </div>
          <div id="tablettab_gcode_pause" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #efbb33;">
            <canvas id="pauseBtn" style="width: 100%; height: 100%"></canvas>
          </div>
          <div id="tablettab_gcode_stop" class="maslow-grid-item maslow-grid-item-btn"
            style="background-color: #ce654c;">
            <canvas id="stopBtn" style="width: 100%; height: 100%"></canvas>
          </div>
        </div>
        <div class="maslow-grid-container tablettab-controls-item" style="grid-template-columns: auto auto;">
          <div class="maslow-grid-item">
            <table style="width:100%">
              <tr>
                <td>X:</td>
                <td id="mpos-x">
                  0.000
                </td>
              </tr>
              <tr>
                <td>Y:</td>
                <td id="mpos-y">
                  0.000
                </td>
              </tr>
              <tr>
                <td>Z:</td>
                <td id="mpos-z">
                  0.000
                </td>
              </tr>
              <tr>
                <td id="active-state"></td>
              </tr>
            </table>
          </div>
          <div id="systemStatus" class="maslow-grid-item system-status">Idle</div>
        </div>
        <textarea style="border:  none" class="messages tablettab-controls-item" id="messages" rows="14"
          spellcheck="false" readonly>Serial Messages</textarea>
        <button id="tablettab_save_serial_msg" class="btn btn-primary">Save Serial</button>
      </div>
    </div>
  </div>

  <div id="calibration-popup" class="calibration-modal-container">
    <div id="calibration_popup_content" class="calibration-modal-content">
      <div class="calibration-modal-button-container">
        <div class="buttons-row">
          <button id="tablettab_cal_retract" class="calibration-modal-button">Retract All</button>
          <span class="arrow">&#8594;</span>
          <button id="tablettab_cal_extend" class="calibration-modal-button">Extend All</button>
          <div class="buttons-row-col-el">
            <span class="arrow">&#8599;</span>
            <span class="arrow">&#8600;</span>
          </div>
          <div class="buttons-row-col-el">
            <button id="tablettab_cal_calibrate" class="calibration-modal-button">Calibrate</button>
            <button id="tablettab_cal_tense" class="calibration-modal-button">Apply Tension</button>
          </div>
        </div>
        <div class="buttons-row">
          <!-- <button id="tablettab_cal_homez" class="calibration-modal-button">Home Z</button> -->
          <button id="tablettab_cal_config" class="calibration-modal-button">Config</button>
          <button id="tablettab_cal_stop" class="calibration-modal-button stop-button">Stop</button>
          <button id="tablettab_cal_zstop" class="calibration-modal-button"
            title="Record the 'bottom' limit for Z-axis movement">Set Z-Stop</button>
        </div>
        <div class="buttons-row">
          <button id="tablettab_cal_test" class="calibration-modal-button">Test</button>
          <button id="tablettab_cal_relax" class="calibration-modal-button">Release Tension</button>
        </div>
      </div>
    </div>
  </div>

  <div id="configuration-popup" class="calibration-modal-container">
    <div id="tabelttab_config_popup_content" class="calibration-modal-content">
      <div class="calibration-modal-button-container">
        <div class="input-row">
          <div style="display: flex; justify-content: center;">
            <label style="text-align: center;">Configuration</label>
          </div>
        </div>
        <hr style="border-top: 1px dashed;">
        <div class="grid-container">
          <div class="input-row">
            <label for="extendDist" class="input-label">Extend Dist</label>
          </div>
          <div class="input-row">
            <input id="extendDist" type="text" class="calibration-modal-input">
          </div>
          <div class="input-row">
            <label for="machineOrientation" class="input-label">Orientation</label>
          </div>
          <div class="input-row">
            <select id="machineOrientation" class="calibration-modal-input">
              <option value="horizontal">Horizontal</option>
              <option value="vertical">Vertical</option>
            </select>
          </div>
        </div>
        <hr style="border-top: 1px dashed;">
        <div class="input-row">
          <div style="display: flex; justify-content: center;">
            <label style="text-align: center;">Calibration Grid</label>
          </div>
        </div>
        <div class="grid-container">
          <div class="input-row">
            <label for="gridWidth" class="input-label">Width(mm)</label>
          </div>
          <div class="input-row">
            <input id="gridWidth" type="text" class="calibration-modal-input">
          </div>
          <div class="input-row">
            <label for="gridHeight" class="input-label">Height(mm)</label>
          </div>
          <div class="input-row">
            <input id="gridHeight" type="text" class="calibration-modal-input">
          </div>
          <div class="input-row">
            <label for="gridSize" class="input-label">Grid Size:</label>
          </div>
          <div class="input-row">
            <select id="gridSize" class="calibration-modal-input">
              <option value="3">3x3</option>
              <option value="5">5x5</option>
              <option value="7">7x7</option>
              <option value="9" selected>9x9</option>
            </select>
          </div>
        </div>
        <hr style="border-top: 1px dashed;">
        <div class="grid-container">
          <div class="input-row">
            <label for="retractionForce" class="input-label">Retraction Force</label>
          </div>
          <div class="input-row">
            <input id="retractionForce" type="text" class="calibration-modal-input">
          </div>
        </div>
        <hr style="border-top: 1px dashed;">
        <div class="input-row">
          <button id="tablettab_config_save" type="button" class="calibration-modal-button">Save</button>
        </div>
      </div>
    </div>
  </div>
</div>